(ns malt.outcomes_test
  (:use clojure.test))

(def value! (byte 15))
(def div0! (byte 7))

#_(defmacro outcome-test [id name coef]
  `(deftest ~(symbol (str name "-" id "-test"))
     (let [coef#  (:coef (first (outcome/get-outcomes [~id]  (math_parser/get-workbook-config @math_parser/workbooks 1))))]
  (testing (str "id:" ~id " " ~name " test crash")
    (is (utils/trim-equal ~coef coef#))))))

(comment
  (outcome-test 1 "match-winner-2way-home" 2.2)
  (outcome-test 2 "match-winner-2way-away" 1.6)
  (outcome-test 3 "match-handicap-home" 1.85)
  (outcome-test 4 "match-handicap-away" 1.85)
  (outcome-test 5 "match-total-over" 1.95)
  (outcome-test 6 "match-total-under" 1.75)
  (outcome-test 7 "home-team-total-over" 1.75)
  (outcome-test 8 "home-team-total-under" 1.95)
  (outcome-test 9 "away-team-total-over" 1.85)
  (outcome-test 10 "away-team-total-under" 1.85)
  (outcome-test 11 "quarter-winner-3-way-home" 2.32)
  (outcome-test 12 "quarter-winner-3-way-away" 2.26)
  (outcome-test 14 "quarter-handicap-home" 1.80)
  (outcome-test 15 "quarter-handicap-away" 1.90)
  (outcome-test 16 "quarter-total-over" 1.75)
  (outcome-test 17 "quarter-total-under" 1.95)
  (outcome-test 18 "home-team-total-over" 1.85)
  (outcome-test 19 "home-team-total-under" 1.85)
  (outcome-test 20 "away-team-total-over" 1.95)
  (outcome-test 21 "away-team-total-under" 1.75)
  (outcome-test 22 "winner-of-current-half-2-way-home" 1.57)
  (outcome-test 23 "winner-of-current-half-2-way-away" 2.26)
  (outcome-test 24 "current-half-handicap-home" 1.85)
  (outcome-test 25 "current-half-handicap-away" 1.85)
  (outcome-test 26 "current-half-total-over" 1.95)
  (outcome-test 27 "current-half-total-under" 1.75)
  (outcome-test 28 "home-team-total-over" 1.75)
  (outcome-test 29 "home-team-total-under" 1.95)
  (outcome-test 30 "away-team-total-over" 1.85)
  (outcome-test 31 "away-team-total-under" 1.85)
  (outcome-test 32 "quarter-winner-3-way-home" 1.46)
  (outcome-test 33 "quarter-winner-3-way-away" 2.54)
  (outcome-test 34 "quarter-handicap-home" 1.85)
  (outcome-test 35 "quarter-handicap-away" 1.85)
  (outcome-test 36 "quarter-total-over" 1.85)
  (outcome-test 37 "quarter-total-under" 1.85)
  (outcome-test 38 "home-team-total-over" 1.75)
  (outcome-test 39 "home-team-total-under" 1.95)
  (outcome-test 40 "away-team-total-over" 1.90)
  (outcome-test 41 "away-team-total-under" 1.80)
  (outcome-test 42 "winner-of-second-half-3-way-home" value!)
  (outcome-test 43 "winner-of-second-half-3-way-away" value!)
  (outcome-test 44 "second-half-handicap-home" 1.85)
  (outcome-test 45 "second-half-handicap-away" 1.85)
  (outcome-test 46 "second-half-total-over" value!)
  (outcome-test 47 "second-half-total-under" value!)
  (outcome-test 48 "home-team-total-over" value!)
  (outcome-test 49 "home-team-total-under" value!)
  (outcome-test 50 "away-team-total-over" value!)
  (outcome-test 51 "away-team-total-under" value!)
  (outcome-test 52 "race-to-10-pts-2-way-home" 1.904953787)
  (outcome-test 53 "race-to-10-pts-2-way-away" 1.801630137)
  (outcome-test 54 "race-to-15-pts-2-way-home" 1.650892158)
  (outcome-test 55 "race-to-15-pts-2-way-away" 2.108517311)
  (outcome-test 56 "race-to-20-pts-2-way-home" 1.506951575)
  (outcome-test 57 "race-to-20-pts-2-way-away" 2.401486981)
  (outcome-test 58 "race-to-10-pts-3-way-home" 7.459830537)
  (outcome-test 59 "race-to-10-pts-3-way-neither" 1.184540036)
  (outcome-test 60 "race-to-10-pts-3-way-away" 7.055213415)
  (outcome-test 61 "race-to-15-pts-3-way-home" 11)
  (outcome-test 62 "race-to-15-pts-3-way-neither" 1.01)
  (outcome-test 63 "race-to-15-pts-3-way-away" 11)
  (outcome-test 64 "race-to-20-pts-3-way-home" 11)
  (outcome-test 65 "race-to-20-pts-3-way-neither" 1.01)
  (outcome-test 66 "race-to-20-pts-3-way-away" 11)
  (outcome-test 67 "will-home-team-earn-150-pts-in-match?-yes" 1.01)
  (outcome-test 68 "will-home-team-earn-150-pts-in-match?-no" div0!)
  (outcome-test 69 "will-home-team-earn-140-pts-in-match?-yes" 1.01)
  (outcome-test 70 "will-home-team-earn-140-pts-in-match?-no" div0!)
  (outcome-test 71 "will-home-team-earn-130-pts-in-match?-yes" 1.01)
  (outcome-test 72 "will-home-team-earn-130-pts-in-match?-no" div0!)
  (outcome-test 73 "will-home-team-earn-120-pts-in-match?-yes" 1.01)
  (outcome-test 74 "will-home-team-earn-120-pts-in-match?-no" div0!)
  (outcome-test 75 "will-home-team-earn-110-pts-in-match?-yes" 1.01)
  (outcome-test 76 "will-home-team-earn-110-pts-in-match?-no" div0!)
  (outcome-test 77 "will-home-team-earn-100-pts-in-match?-yes" 1.01)
  (outcome-test 78 "will-home-team-earn-100-pts-in-match?-no" div0!)
  (outcome-test 79 "will-home-team-earn-90-pts-in-match?-yes" 1.01)
  (outcome-test 80 "will-home-team-earn-90-pts-in-match?-no" div0!)
  (outcome-test 81 "will-home-team-earn-80-pts-in-match?-yes" div0!)
  (outcome-test 82 "will-home-team-earn-80-pts-in-match?-no" 1.01)
  (outcome-test 83 "will-home-team-earn-70-pts-in-match?-yes" 11.00)
  (outcome-test 84 "will-home-team-earn-70-pts-in-match?-no" 1.01)
  (outcome-test 85 "will-home-team-earn-60-pts-in-match?-yes" 11.00)
  (outcome-test 86 "will-home-team-earn-60-pts-in-match?-no" 1.01)
  (outcome-test 87 "will-home-team-earn-50-pts-in-match?-yes" 11.00)
  (outcome-test 88 "will-home-team-earn-50-pts-in-match?-no" 1.01)
  (outcome-test 89 "will-home-team-earn-40-pts-in-match?-yes" 11.00)
  (outcome-test 90 "will-home-team-earn-40-pts-in-match?-no" 1.01)
  (outcome-test 91 "will-away-team-earn-150-pts-in-match?-yes" 1.01)
  (outcome-test 92 "will-away-team-earn-150-pts-in-match?-no" div0!)
  (outcome-test 93 "will-away-team-earn-140-pts-in-match?-yes" 1.01)
  (outcome-test 94 "will-away-team-earn-140-pts-in-match?-no" div0!)
  (outcome-test 95 "will-away-team-earn-130-pts-in-match?-yes" 1.01)
  (outcome-test 96 "will-away-team-earn-130-pts-in-match?-no" div0!)
  (outcome-test 97 "will-away-team-earn-120-pts-in-match?-yes" 1.01)
  (outcome-test 98 "will-away-team-earn-120-pts-in-match?-no" div0!)
  (outcome-test 99 "will-away-team-earn-110-pts-in-match?-yes" 1.01)
  (outcome-test 100 "will-away-team-earn-110-pts-in-match?-no" div0!)
  (outcome-test 101 "will-away-team-earn-100-pts-in-match?-yes" 1.01)
  (outcome-test 102 "will-away-team-earn-100-pts-in-match?-no" div0!)
  (outcome-test 103 "will-away-team-earn-90-pts-in-match?-yes" 1.01)
  (outcome-test 104 "will-away-team-earn-90-pts-in-match?-no" div0!)
  (outcome-test 105 "will-away-team-earn-80-pts-in-match?-yes" 1.01)
  (outcome-test 106 "will-away-team-earn-80-pts-in-match?-no" div0!)
  (outcome-test 107 "will-away-team-earn-70-pts-in-match?-yes" 1.01)
  (outcome-test 108 "will-away-team-earn-70-pts-in-match?-no" div0!)
  (outcome-test 109 "will-away-team-earn-60-pts-in-match?-yes" 1.01)
  (outcome-test 110 "will-away-team-earn-60-pts-in-match?-no" 11.00)
  (outcome-test 111 "will-away-team-earn-50-pts-in-match?-yes" 1.01)
  (outcome-test 112 "will-away-team-earn-50-pts-in-match?-no" 11.00)
  (outcome-test 113 "will-away-team-earn-40-pts-in-match?-yes" 1.01)
  (outcome-test 114 "will-away-team-earn-40-pts-in-match?-no" 11.00)
  (outcome-test 115 "will-any-team-earn-140-pts-in-match?-yes" div0!)
  (outcome-test 116 "will-any-team-earn-140-pts-in-match?-no" 1.01)
  (outcome-test 117 "will-any-team-earn-130-pts-in-match?-yes" div0!)
  (outcome-test 118 "will-any-team-earn-130-pts-in-match?-no" 1.01)
  (outcome-test 119 "will-any-team-earn-120-pts-in-match?-yes" div0!)
  (outcome-test 120 "will-any-team-earn-120-pts-in-match?-no" 1.01)
  (outcome-test 121 "will-any-team-earn-110-pts-in-match?-yes" div0!)
  (outcome-test 122 "will-any-team-earn-110-pts-in-match?-no" 1.01)
  (outcome-test 123 "will-any-team-earn-100-pts-in-match?-yes" div0!)
  (outcome-test 124 "will-any-team-earn-100-pts-in-match?-no" 1.01)
  (outcome-test 125 "will-any-team-earn-90-pts-in-match?-yes" div0!)
  (outcome-test 126 "will-any-team-earn-90-pts-in-match?-no" 1.01)
  (outcome-test 127 "will-any-team-earn-80-pts-in-match?-yes" div0!)
  (outcome-test 128 "will-any-team-earn-80-pts-in-match?-no" 1.01)
  (outcome-test 129 "will-any-team-earn-70-pts-in-match?-yes" 11)
  (outcome-test 130 "will-any-team-earn-70-pts-in-match?-no" 1.01)
  (outcome-test 131 "will-any-team-earn-60-pts-in-match?-yes" 11)
  (outcome-test 132 "will-any-team-earn-60-pts-in-match?-no" 1.01)
  )